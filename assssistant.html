<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis AI Assistant</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-blue-500 mb-2">Jarvis AI Assistant</h1>
            <p class="text-gray-400">Your intelligent voice-activated web companion</p>
        </header>

        <!-- Main Interface -->
        <div class="bg-gray-800 rounded-xl p-6 shadow-lg mb-8">
            <!-- Status Display -->
            <div class="flex flex-col items-center mb-6">
                <div id="statusCircle" class="w-32 h-32 rounded-full flex items-center justify-center bg-gray-700 border-4 border-blue-500 transition-all duration-300 mb-4">
                    <img src="/api/placeholder/64/64" alt="Jarvis Icon" id="jarvisIcon" class="w-16 h-16">
                </div>
                <div id="statusText" class="text-xl text-gray-300">Click Start to activate Jarvis</div>
            </div>

            <!-- Controls -->
            <div class="flex justify-center mb-6">
                <button id="startButton" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-medium transition-colors duration-200">
                    Start Jarvis
                </button>
            </div>

            <!-- Chat Output -->
            <div id="outputContainer" class="bg-gray-700 rounded-lg p-4 max-h-96 overflow-y-auto space-y-2">
                <!-- Messages will be added here dynamically -->
            </div>
        </div>

        <!-- Command List -->
        <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
            <h2 class="text-2xl font-bold text-blue-500 mb-4">Available Commands</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                    <div class="flex items-center space-x-2">
                        <span class="text-blue-400">•</span>
                        <span>"Open Google"</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-blue-400">•</span>
                        <span>"Open YouTube"</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-blue-400">•</span>
                        <span>"Open Stack Overflow"</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-blue-400">•</span>
                        <span>"Open Lichess"</span>
                    </div>
                </div>
                <div class="space-y-2">
                    <div class="flex items-center space-x-2">
                        <span class="text-blue-400">•</span>
                        <span>"What is your name?"</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-blue-400">•</span>
                        <span>"What time is it?"</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-blue-400">•</span>
                        <span>"Where is [location]"</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-blue-400">•</span>
                        <span>"Search Wikipedia for [topic]"</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class JarvisAssistant {
            constructor() {
                this.init();
                this.setupEventListeners();
            }

            init() {
                this.recognition = null;
                this.synthesis = window.speechSynthesis;
                this.isListening = false;
                this.elements = {
                    startButton: document.getElementById('startButton'),
                    statusText: document.getElementById('statusText'),
                    statusCircle: document.getElementById('statusCircle'),
                    outputContainer: document.getElementById('outputContainer')
                };
                this.setupSpeechRecognition();
            }

            setupSpeechRecognition() {
                if ('webkitSpeechRecognition' in window) {
                    this.recognition = new webkitSpeechRecognition();
                    this.configureRecognition();
                } else {
                    this.updateStatus('Speech recognition not supported in this browser');
                }
            }

            configureRecognition() {
                this.recognition.continuous = false;
                this.recognition.interimResults = false;
                this.recognition.lang = 'en-US';

                this.recognition.onresult = (event) => {
                    const command = event.results[0][0].transcript.toLowerCase();
                    this.handleCommand(command);
                };

                this.recognition.onend = () => {
                    if (this.isListening) {
                        this.recognition.start();
                    } else {
                        this.updateStatus('Click Start to activate Jarvis');
                    }
                };
            }

            setupEventListeners() {
                this.elements.startButton.addEventListener('click', () => {
                    this.isListening ? this.stop() : this.start();
                });
            }

            start() {
                if (this.recognition) {
                    this.isListening = true;
                    this.recognition.start();
                    this.updateInterface('active');
                    this.wishMe();
                }
            }

            stop() {
                if (this.recognition) {
                    this.isListening = false;
                    this.recognition.stop();
                    this.updateInterface('inactive');
                }
            }

            updateInterface(state) {
                if (state === 'active') {
                    this.elements.startButton.textContent = 'Stop Jarvis';
                    this.elements.startButton.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                    this.elements.startButton.classList.add('bg-red-500', 'hover:bg-red-600');
                    this.elements.statusCircle.classList.add('animate-pulse');
                    this.updateStatus('Listening...');
                } else {
                    this.elements.startButton.textContent = 'Start Jarvis';
                    this.elements.startButton.classList.remove('bg-red-500', 'hover:bg-red-600');
                    this.elements.startButton.classList.add('bg-blue-500', 'hover:bg-blue-600');
                    this.elements.statusCircle.classList.remove('animate-pulse');
                    this.updateStatus('Click Start to activate Jarvis');
                }
            }

            updateStatus(text) {
                this.elements.statusText.textContent = text;
            }

            addMessage(type, text) {
                const messageElement = document.createElement('div');
                messageElement.className = `p-3 rounded ${type === 'user' ? 'bg-blue-900' : 'bg-green-900'}`;
                
                const prefix = document.createElement('span');
                prefix.className = 'font-bold';
                prefix.textContent = `${type === 'user' ? 'You' : 'Jarvis'}: `;
                
                const content = document.createElement('span');
                content.textContent = text;
                
                messageElement.appendChild(prefix);
                messageElement.appendChild(content);
                
                this.elements.outputContainer.appendChild(messageElement);
                this.elements.outputContainer.scrollTop = this.elements.outputContainer.scrollHeight;
            }

            speak(text) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 1.0;
                utterance.pitch = 1.0;
                this.synthesis.speak(utterance);
                this.addMessage('jarvis', text);
            }

            handleCommand(command) {
                this.addMessage('user', command);
                
                // Command processor
                const commands = {
                    'open google': () => {
                        this.speak('Opening Google');
                        window.open('https://google.com', '_blank');
                    },
                    'open youtube': () => {
                        this.speak('Opening YouTube');
                        window.open('https://youtube.com', '_blank');
                    },
                    'open stack overflow': () => {
                        this.speak('Opening Stack Overflow');
                        window.open('https://stackoverflow.com', '_blank');
                    },
                    'open lichess': () => {
                        this.speak('Opening Lichess');
                        window.open('https://lichess.org', '_blank');
                    },
                    'what is your name': () => {
                        this.speak('My name is Jarvis');
                    },
                    'what time is it': () => {
                        const time = new Date().toLocaleTimeString();
                        this.speak(`The time is ${time}`);
                    },
                    'where is': () => {
                        const location = command.split('where is')[1].trim();
                        this.speak(`Showing you where ${location} is`);
                        window.open(`https://www.google.com/maps/search/${encodeURIComponent(location)}`, '_blank');
                    },
                    'wikipedia': () => {
                        const search = command.replace('wikipedia', '').trim();
                        this.speak(`Searching Wikipedia for ${search}`);
                        window.open(`https://en.wikipedia.org/wiki/${encodeURIComponent(search)}`, '_blank');
                    },
                    'bye': () => {
                        this.speak('Goodbye! Have a nice day');
                        setTimeout(() => this.stop(), 2000);
                    }
                };

                // Execute command if found, otherwise give feedback
                let commandFound = false;
                for (const [key, action] of Object.entries(commands)) {
                    if (command.includes(key)) {
                        action();
                        commandFound = true;
                        break;
                    }
                }

                if (!commandFound) {
                    this.speak("I'm sorry, I didn't understand that command");
                }
            }

            wishMe() {
                const hour = new Date().getHours();
                const greetings = {
                    morning: 'Good Morning!',
                    afternoon: 'Good Afternoon!',
                    evening: 'Good Evening!'
                };

                const greeting = hour < 12 ? greetings.morning : 
                               hour < 18 ? greetings.afternoon : 
                               greetings.evening;

                this.speak(`${greeting} I am Jarvis, how can I help you?`);
            }
        }

        // Initialize Jarvis when the page loads
        window.addEventListener('load', () => {
            window.jarvis = new JarvisAssistant();
        });
    </script>
</body>
</html>
